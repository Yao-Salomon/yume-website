{% extends 'general/base.html'%}{% load static %}

{% block breadcrumb %}
<li class="breadcrumb-item sm me-1"><a title="Lien vers l'accueil" class="text-white text-decoration-none" href="{% url 'home'%}">Accueil</a></li>
<li class="breadcrumb-item sm me-1 active" aria-current="page"><a title="Lien vers l'accueil" class="text-warning text-decoration-none" href="{% url 'annuaire' %}">Annuaire</a></li>
{% endblock %} 
 
{% block contenu %}
<div class="row mt-2">
    {% for produit in produits %}
    <div class="col-12 col-md-6 col-lg-4 mb-2 shadow">
        <div class="card" style="min-height: 300px;">
            <div class="card-header alert-annuaire-primary d-flex flex-column justify-content-evenly border-bottom border-1 border-primary">
                <div class="d-flex justify-content-center border-bottom border-1 border-primary mb-2">
                    <h3 class="fs-3">{{produit.nom}}</h3>
                    {% if produit.badge == "ruby" %}
                    <i class="bi bi-award-fill text-danger fs-4"></i>
                    {% elif produit.badge == "diamant" %}
                    <i class="bi bi-award-fill text-annuaire-primary fs-4"></i>
                    {% elif produit.badge == "or" %}
                    <i class="bi bi-award-fill text-warning fs-4"></i>
                    {% elif produit.badge == "argent" %}
                    <i class="bi bi-award-fill text-dark fs-4"></i>
                    {% elif produit.badge == "bronze" %}
                    <i class="bi bi-award-fill text-warning fs-4"></i>
                    {% endif %}
                </div>
                <div class="d-flex justify-content-center flex-column">
                    <h4 class="text-center fw-bolder lead fst-italic">{{produit.subtitle}}</h4>
                    <div class="d-flex justify-content-evenly">
                        <h5 class="text-decoration-line-through fs-4">{{produit.old_price|floatformat}}  {{utiles.currency}}</h5>
                        <h5 class="fs-4 fw-light">{{produit.price|floatformat}} {{utiles.currency}}</h4>
                    </div>
                </div>
            </div>
            <div class="card-body">
                {% for fonctionalite in produit.get_fonctionalite %}
                <div class="d-flex justify-content-around pt-2 text-center border-3 mt-2 rounded border-top border-bottom border-annuaire-primary">
                    <p>{{fonctionalite.nom}}</p>
                    <p>{{fonctionalite.nombre}}</p>
                    {% if fonctionalite.inclusion %}
                        <i class="bi-check-circle-fill text-success"></i>
                    {% else %}
                        <i class="bi-x-circle-fill text-danger"></i>  
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            <div class="card-footer">
                Il y a {{produit.date_de_creation|timesince}}
            </div>
        </div>
    </div>
    {% empty %}
    <div>
        <p>Aucun produits enregistr√©s</p>
    </div>
    {% endfor %}
</div>
<div class="row">
    {% if pages > 1 %}
    <div class=" col-12 d-flex justify-content-center align-items-center mt-4">
        <nav aria-label="Page navigation example">
            <ul class="pagination">
                {% if current_page > 1 %}
                <li class="page-item"><a class="page-link" href="?page={{current_page|add:'-1'}}"><i class="bi-caret-left-fill"></i></a></li>
                {% else %}
                <li class="page-item"><a class="page-link" href="?page=1"><i class="bi-caret-left-fill"></i></a></li>
                {% endif %}
                {% for page in page_range %}
                    {% if page == current_page %}
                    <li class="page-item"><a class="page-link bg-warning text-white" href="?page={{page}}">{{page}}</a></li>
                    {% else %}
                    <li class="page-item"><a class="page-link" href="?page={{page}}">{{page}}</a></li>
                    {% endif %}
                {% endfor %}
                {% if current_page == pages %}
                <li class="page-item"><a class="page-link" href="?page={{current_page|add:'1'}}"><i class="bi-caret-right-fill"></i></a></li>
                {% else %}
                <li class="page-item"><a class="page-link" href="?page={{pages}}"><i class="bi-caret-right-fill"></i></a></li>
                {% endif %}
            </ul>
          </nav>
    </div>
    {% endif %}
</div>
{% endblock %}
